2025-08-23 16:41:53.958 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-08-23 16:41:54.212 [main] INFO  c.s.m.d.i.UserIntegrationTest - Starting UserIntegrationTest using Java 17.0.11 with PID 29996 (started by tntls in C:\Users\tntls\IdeaProjects\discodeit)
2025-08-23 16:41:54.224 [main] DEBUG c.s.m.d.i.UserIntegrationTest - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-08-23 16:41:54.226 [main] INFO  c.s.m.d.i.UserIntegrationTest - The following 1 profile is active: "dev"
2025-08-23 16:41:58.168 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-23 16:41:58.413 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 218 ms. Found 7 JPA repository interfaces.
2025-08-23 16:42:00.739 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-08-23 16:42:01.751 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@356341c9
2025-08-23 16:42:01.755 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-08-23 16:42:02.041 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-23 16:42:02.341 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-08-23 16:42:02.491 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-23 16:42:03.791 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-23 16:42:04.213 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-23 16:42:07.437 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-23 16:42:07.470 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-08-23 16:42:07.472 [main] DEBUG org.hibernate.SQL - 
    alter table if exists message_attachments 
       drop constraint if exists FKsd1m8rb8jcpbcnb7rpdue7ctc
2025-08-23 16:42:07.489 [main] DEBUG org.hibernate.SQL - 
    alter table if exists message_attachments 
       drop constraint if exists FKj7twd218e2gqw9cmlhwvo1rth
2025-08-23 16:42:07.490 [main] DEBUG org.hibernate.SQL - 
    alter table if exists messages 
       drop constraint if exists FKowtlim26svclkatusptbgi7u1
2025-08-23 16:42:07.492 [main] DEBUG org.hibernate.SQL - 
    alter table if exists messages 
       drop constraint if exists FK3u3ckbhwq9se1cmopk2pq05b2
2025-08-23 16:42:07.494 [main] DEBUG org.hibernate.SQL - 
    alter table if exists read_statuses 
       drop constraint if exists FKa38ri44ml4gfdpklx4ahqr8gd
2025-08-23 16:42:07.496 [main] DEBUG org.hibernate.SQL - 
    alter table if exists read_statuses 
       drop constraint if exists FKml3k4wr9sj5yxrmj6d0aoib2e
2025-08-23 16:42:07.497 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_status 
       drop constraint if exists FKi21pi0g9yogah1kwedmuhnt5s
2025-08-23 16:42:07.498 [main] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKtbudycgrip49xdptogmhfqnso
2025-08-23 16:42:07.500 [main] DEBUG org.hibernate.SQL - 
    drop table if exists binary_contents cascade
2025-08-23 16:42:07.515 [main] DEBUG org.hibernate.SQL - 
    drop table if exists channels cascade
2025-08-23 16:42:07.522 [main] DEBUG org.hibernate.SQL - 
    drop table if exists message_attachments cascade
2025-08-23 16:42:07.526 [main] DEBUG org.hibernate.SQL - 
    drop table if exists messages cascade
2025-08-23 16:42:07.529 [main] DEBUG org.hibernate.SQL - 
    drop table if exists read_statuses cascade
2025-08-23 16:42:07.533 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_status cascade
2025-08-23 16:42:07.537 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-08-23 16:42:07.558 [main] DEBUG org.hibernate.SQL - 
    create table binary_contents (
        created_at timestamp(6) with time zone,
        size bigint not null,
        id uuid not null,
        content_type varchar(255) not null,
        file_name varchar(255) not null,
        bytes bytea not null,
        primary key (id)
    )
2025-08-23 16:42:07.585 [main] DEBUG org.hibernate.SQL - 
    create table channels (
        created_at timestamp(6) with time zone,
        updated_at timestamp(6) with time zone,
        id uuid not null,
        description varchar(255),
        name varchar(255),
        type varchar(255) not null check (type in ('PRIVATE','PUBLIC')),
        primary key (id)
    )
2025-08-23 16:42:07.595 [main] DEBUG org.hibernate.SQL - 
    create table message_attachments (
        created_at timestamp(6) with time zone,
        attachment_id uuid unique,
        id uuid not null,
        message_id uuid,
        primary key (id)
    )
2025-08-23 16:42:07.602 [main] DEBUG org.hibernate.SQL - 
    create table messages (
        created_at timestamp(6) with time zone,
        updated_at timestamp(6) with time zone,
        author_id uuid not null,
        channel_id uuid not null,
        id uuid not null,
        content varchar(255) not null,
        primary key (id)
    )
2025-08-23 16:42:07.607 [main] DEBUG org.hibernate.SQL - 
    create table read_statuses (
        created_at timestamp(6) with time zone,
        last_read_at timestamp(6) with time zone not null,
        updated_at timestamp(6) with time zone,
        channel_id uuid not null,
        id uuid not null,
        user_id uuid not null,
        primary key (id),
        unique (user_id, channel_id)
    )
2025-08-23 16:42:07.623 [main] DEBUG org.hibernate.SQL - 
    create table user_status (
        created_at timestamp(6) with time zone,
        last_active_at timestamp(6) with time zone not null,
        updated_at timestamp(6) with time zone,
        id uuid not null,
        user_id uuid not null unique,
        primary key (id)
    )
2025-08-23 16:42:07.632 [main] DEBUG org.hibernate.SQL - 
    create table users (
        created_at timestamp(6) with time zone,
        updated_at timestamp(6) with time zone,
        id uuid not null,
        profile_id uuid unique,
        email varchar(255) not null unique,
        password varchar(255) not null,
        username varchar(255) not null unique,
        primary key (id)
    )
2025-08-23 16:42:07.650 [main] DEBUG org.hibernate.SQL - 
    alter table if exists message_attachments 
       add constraint FKsd1m8rb8jcpbcnb7rpdue7ctc 
       foreign key (attachment_id) 
       references binary_contents
2025-08-23 16:42:07.663 [main] DEBUG org.hibernate.SQL - 
    alter table if exists message_attachments 
       add constraint FKj7twd218e2gqw9cmlhwvo1rth 
       foreign key (message_id) 
       references messages
2025-08-23 16:42:07.667 [main] DEBUG org.hibernate.SQL - 
    alter table if exists messages 
       add constraint FKowtlim26svclkatusptbgi7u1 
       foreign key (author_id) 
       references users
2025-08-23 16:42:07.671 [main] DEBUG org.hibernate.SQL - 
    alter table if exists messages 
       add constraint FK3u3ckbhwq9se1cmopk2pq05b2 
       foreign key (channel_id) 
       references channels
2025-08-23 16:42:07.675 [main] DEBUG org.hibernate.SQL - 
    alter table if exists read_statuses 
       add constraint FKa38ri44ml4gfdpklx4ahqr8gd 
       foreign key (channel_id) 
       references channels
2025-08-23 16:42:07.679 [main] DEBUG org.hibernate.SQL - 
    alter table if exists read_statuses 
       add constraint FKml3k4wr9sj5yxrmj6d0aoib2e 
       foreign key (user_id) 
       references users
2025-08-23 16:42:07.683 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_status 
       add constraint FKi21pi0g9yogah1kwedmuhnt5s 
       foreign key (user_id) 
       references users
2025-08-23 16:42:07.686 [main] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKtbudycgrip49xdptogmhfqnso 
       foreign key (profile_id) 
       references binary_contents
2025-08-23 16:42:07.696 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-23 16:42:08.757 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-23 16:42:11.403 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-08-23 16:42:17.615 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-08-23 16:42:17.616 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-08-23 16:42:17.633 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 4 endpoints beneath base path '/actuator'
2025-08-23 16:42:17.720 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 103 ms
2025-08-23 16:42:18.059 [main] INFO  c.s.m.d.i.UserIntegrationTest - Started UserIntegrationTest in 25.977 seconds (process running for 28.849)
2025-08-23 16:42:20.110 [main] INFO  c.s.m.d.aop.MethodLoggingAspect - Method call: (class=BasicUserService, method=createUser, parameters=(UserCreateServiceRequest = (final username=test, final email=test@test.com, final password=***MASKED***, final profile=org.springframework.mock.web.MockMultipartFile@68abd5e2))
2025-08-23 16:42:20.111 [main] INFO  c.s.m.d.s.basic.BasicUserService - User attempting registeration - username : test, userEmail : test@test.com
2025-08-23 16:42:20.932 [main] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.profile_id,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 16:42:20.944 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [test@test.com]
2025-08-23 16:42:21.664 [main] DEBUG c.s.m.d.s.basic.BasicUserService - email is not duplicated : test@test.com
2025-08-23 16:42:21.669 [main] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.password,
        u1_0.profile_id,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-08-23 16:42:21.669 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [test]
2025-08-23 16:42:21.672 [main] DEBUG c.s.m.d.s.basic.BasicUserService - username is not duplicated : test
2025-08-23 16:42:22.110 [main] INFO  c.s.m.d.s.basic.BasicUserService - user created successfully - userId : d19bb58d-4447-4119-bae8-5cb9e1bd7484
2025-08-23 16:42:22.110 [main] INFO  c.s.m.d.aop.MethodLoggingAspect - Method return: (class : BasicUserService, method : createUser)
2025-08-23 16:42:22.175 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-23 16:42:22.177 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-08-23 16:42:22.183 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
